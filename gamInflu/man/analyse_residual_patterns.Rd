% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analyse_residual_patterns.R
\name{analyse_residual_patterns}
\alias{analyse_residual_patterns}
\title{Analyse Residual Patterns for Model Adequacy}
\usage{
analyse_residual_patterns(
  obj,
  candidate_vars = NULL,
  exclude_vars = NULL,
  residual_type = "deviance",
  smooth_terms = TRUE,
  significance_level = 0.05,
  min_r_squared = 0.1,
  max_missing_percent = 20,
  plot_results = TRUE
)
}
\arguments{
\item{obj}{A `gam_influence` object that has been processed by `calculate_influence()`.}

\item{candidate_vars}{Character vector of variable names to test as potential predictors
of residual patterns. If NULL, all numeric variables not already in the model will be tested.}

\item{exclude_vars}{Character vector of variable names to exclude from analysis (e.g., IDs, dates).}

\item{residual_type}{Character; type of residuals to use. One of "deviance" (default),
"pearson", "response", or "working".}

\item{smooth_terms}{Logical; if TRUE (default), test smooth terms s(var) in addition to linear terms.}

\item{significance_level}{Numeric; significance level for determining important relationships (default 0.05).}

\item{min_r_squared}{Numeric; minimum R-squared threshold for flagging relationships (default 0.1).}

\item{max_missing_percent}{Numeric; maximum percentage of missing values allowed for candidate variables (default 20).
Variables with more missing data will be excluded from analysis.}

\item{plot_results}{Logical; if TRUE (default), generate diagnostic plots for significant relationships.}
}
\value{
A list containing:
  - `linear_results`: Data frame of linear model results ranked by significance
  - `smooth_results`: Data frame of smooth model results (if smooth_terms = TRUE)
  - `significant_vars`: Character vector of variables showing significant patterns
  - `recommendations`: Text recommendations for model improvement
  - `residual_data`: Data frame with residuals and candidate variables
  - `plots`: List of diagnostic plots (if plot_results = TRUE)
}
\description{
Analyses patterns in GAM residuals by fitting models using other variables
in the dataset. This helps identify potential covariates that should be considered for
inclusion in the original GAM model. The function fits both linear and smooth relationships
between residuals and candidate variables, ranking them by explanatory power.
}
