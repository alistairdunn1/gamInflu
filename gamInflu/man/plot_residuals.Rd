% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_residuals.R
\name{plot_residuals}
\alias{plot_residuals}
\title{Residuals Plot}
\usage{
plot_residuals(
  obj,
  type = c("standard", "violin", "both"),
  residual_type = c("deviance", "pearson", "response", "working"),
  show_outliers = TRUE,
  outlier_threshold = 2.5,
  violin_trim = TRUE,
  add_boxplot = TRUE,
  point_alpha = 0.6,
  ...
)
}
\arguments{
\item{obj}{A `gam_influence` object containing the fitted GAM model and data.}

\item{type}{Character. Type of residual plot to create:
- `"standard"`: Standard GAM residual plots (4-panel diagnostic plot)
- `"violin"`: Violin plot of residuals by focus term levels
- `"both"`: Both standard and violin plots (combined layout)}

\item{residual_type}{Character. Type of residuals to calculate:
- `"deviance"`: Deviance residuals (default, family-appropriate)
- `"pearson"`: Pearson residuals
- `"response"`: Response residuals (observed - fitted)
- `"working"`: Working residuals}

\item{show_outliers}{Logical. Should outliers be highlighted in the plots? Default is TRUE.}

\item{outlier_threshold}{Numeric. Threshold for identifying outliers (default 2.5 standard deviations).}

\item{violin_trim}{Logical. Should violin plots be trimmed to data range? Default is TRUE.}

\item{add_boxplot}{Logical. Should boxplots be overlaid on violin plots? Default is TRUE.}

\item{point_alpha}{Numeric. Transparency for individual points in violin plots (0-1, default 0.6).}

\item{...}{Additional arguments passed to ggplot2 functions.}
}
\value{
A ggplot object or patchwork object (for combined plots) showing:
  **Standard plots:**
  - Residuals vs fitted values
  - Q-Q plot of residuals
  - Scale-location plot (sqrt(|residuals|) vs fitted)
  - Residuals vs leverage (Cook's distance contours)

  **Violin plots:**
  - Distribution of residuals by focus term levels
  - Optional boxplots and individual points
  - Outlier identification and highlighting
}
\description{
Creates residual plots for GAM models with options for standard GAM residuals
and violin plots of residuals by focus term levels. Supports all GLM families and provides
comprehensive residual diagnostics.
}
\details{
**Residual Types:**
- **Deviance residuals**: Default choice, appropriate for all GLM families
- **Pearson residuals**: Standardised residuals, useful for checking variance assumptions
- **Response residuals**: Simple observed - fitted, interpretable but may not be appropriate for all families
- **Working residuals**: Used in iterative fitting, less commonly needed for diagnostics

**Family-specific behaviour:**
- **Gaussian**: All residual types available, deviance = Pearson for identity link
- **Binomial**: Deviance residuals recommended for binary data
- **Gamma**: Deviance residuals account for variance structure
- **Poisson**: Deviance residuals appropriate for count data
- **Tweedie**: Deviance residuals handle compound Poisson-Gamma structure

**Outlier Detection:**
Outliers are identified based on standardised residuals exceeding the threshold.
These may indicate influential observations or model misspecification.

**Violin Plots:**
Show the full distribution of residuals within each level of the focus term,
revealing patterns that summary statistics might miss.
}
\examples{
\dontrun{
# Basic usage - standard residual plots
gi <- gam_influence(your_model, focus = "year")
plot_residuals(gi, type = "standard")

# Violin plot of residuals by focus levels
plot_residuals(gi, type = "violin")

# Both plots combined
plot_residuals(gi, type = "both")

# Using different residual types
plot_residuals(gi, type = "violin", residual_type = "pearson")
plot_residuals(gi, type = "standard", residual_type = "response")

# Customised violin plot
plot_residuals(gi,
  type = "violin",
  show_outliers = TRUE, outlier_threshold = 3,
  add_boxplot = FALSE, point_alpha = 0.3
)

# For different model families
# Binomial model
plot_residuals(gi_binomial, type = "violin") # Shows residual patterns for binary data

# Gamma model
plot_residuals(gi_gamma, type = "standard") # Family-appropriate diagnostics
}
}
